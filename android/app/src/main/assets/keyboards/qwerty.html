<!--
  ~ Copyright (c) 2023 Fime project https://fime.site
  ~ Initial author: zelde126@126.com
  -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="simple-keyboard.min.css">
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        .fime-col {
            display: flex;
            flex-direction: column;
        }

        .hg-button:active {
            background: #ccc;
        }

        .fn-style {
            width: 10%;
        }

        .fn-key {
            background: #b5bdc6 !important;
        }

        .spacebar-style {
            width: 32%;
        }

        .hg-button {
            flex-direction: column;
            padding: 0 !important;
        }

        symbol {
            color: #b5b5b5;
            font-size: 1px;
        }

        .hg-button span {
            font-size: 18px;
        }

        hint {
            color: #b5b5b5;
            font-size: 1px;
        }
    </style>
    <title>Qwerty</title>
</head>

<body>
    <div class="keyboardContainer">
        <div class="simple-keyboard hg-theme-default hg-layout-default hg-touch-events" data-layout="main">
            <div class="hg-rows fime-keyboard">
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn">
                        <symbol>1</symbol>
                        <span>q</span>
                        <!-- <hint>iu</hint> -->
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>2</symbol>
                        <span>w</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>3</symbol>
                        <span>e</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>4</symbol>
                        <span>r</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>5</symbol>
                        <span>t</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>6</symbol>
                        <span>y</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>7</symbol>
                        <span>u</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>8</symbol>
                        <span>i</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>9</symbol>
                        <span>o</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>0</symbol>
                        <span>p</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn">
                        <symbol>~</symbol>
                        <span>a</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>!</symbol>
                        <span>s</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>@</symbol>
                        <span>d</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>#</symbol>
                        <span>f</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>$</symbol>
                        <span>g</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>%</symbol>
                        <span>h</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>^</symbol>
                        <span>j</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>&</symbol>
                        <span>k</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>;</symbol>
                        <span>l</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-functionBtn hg-button-shift fn-key">
                        <span>⇧</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>(</symbol>
                        <span>z</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>)</symbol>
                        <span>x</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>[</symbol>
                        <span>c</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>]</symbol>
                        <span>v</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>{</symbol>
                        <span>b</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>}</symbol>
                        <span>n</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>/</symbol>
                        <span>m</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-backspace fn-key"><span>⌫</span></div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-functionBtn hg-button-abc fn-style fn-key"><span>ABC</span></div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>？</symbol>
                        <span>'分</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-space spacebar-style"><span>Space</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>，</symbol>
                        <span>,</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>。</symbol>
                        <span>.</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-ent fn-style fn-key"><span>⏎</span></div>
                </div>
            </div>
        </div>

        <div class="simple-keyboard hg-theme-default hg-layout-default hg-touch-events" data-layout="abc">
            <div class="hg-rows fime-keyboard">
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn">
                        <span>q</span>
                        <!-- <hint>iu</hint> -->
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>w</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>e</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>r</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>t</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>y</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>u</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>i</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>o</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>p</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn">
                        <span>a</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>s</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>d</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>f</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>g</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>h</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>j</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>k</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <symbol>;</symbol>
                        <span>l</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-functionBtn hg-button-shift fn-key">
                        <span>⇧</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>z</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>x</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>c</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>v</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>b</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>n</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>m</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-backspace fn-key"><span>⌫</span></div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-functionBtn hg-button-abc fn-style fn-key"><span>123</span></div>
                    <div class="hg-button hg-standardBtn">
                        <span>/</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-space spacebar-style"><span>Space</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>,</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>.</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-ent fn-style fn-key"><span>⏎</span></div>
                </div>
            </div>
        </div>

        <div class="simple-keyboard hg-theme-default hg-layout-default hg-touch-events" data-layout="decimal">
            <div class="hg-rows fime-keyboard">
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn fn-key">
                        <span>+</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>1</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>2</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>3</span>
                    </div>
                    <div class="hg-button hg-functionBtn hg-button-backspace fn-key">
                        <span>⌫</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn fn-key">
                        <span>-</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>4</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>5</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>6</span>
                    </div>
                    <div class="hg-button hg-functionBtn">
                        <span>.</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn fn-key">
                        <span>/</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>7</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>8</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>9</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>Space</span>
                    </div>
                </div>
                <div class="hg-row">
                    <div class="hg-button hg-standardBtn fn-key">
                        <span>返回</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>*</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>0</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>#</span>
                    </div>
                    <div class="hg-button hg-standardBtn">
                        <span>⏎</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="touch.js"></script>
    <script src="fime.js"></script>
    <script>
        fime.callNative('init', 'keyboard')

        function initListeners(el) {
            el.addEventListener('tap', function (e) {
                activeButton(e.target)
                let name = e.target.querySelector('span').innerHTML
                console.log('on key: ' + name)
                if (name == 'ABC') {
                    switchLayout('abc')
                    fime.setMode(0)
                } else if (name == '123') {
                    switchLayout('decimal')
                    fime.setMode(0)
                } else if (name == '返回') {
                    switchLayout('main')
                    fime.setMode(1)
                } else if (name == 'Space') {
                    fime.onKey('VK_SPACE')
                } else if (name == '⌫') {
                    fime.onKey('FN_BACKSPACE')
                } else if (name == '⏎') {
                    fime.onKey('FN_ENTER')
                } else {
                    fime.onKey(name)
                }
            })
            el.addEventListener('swipeup', function (e) {
                activeButton(e.target)
                let symbol = e.target.querySelector('symbol')
                if (symbol) {
                    console.log('on key: ' + symbol.innerHTML)
                    fime.onKey(symbol.innerHTML)
                }
            })
            el.addEventListener('swipedown', function (e) {
                activeButton(e.target)
                console.log('on swipedown')
            })
            el.addEventListener('swipeleft', function (e) {
                activeButton(e.target)
                console.log('on swipeleft')
            })
            el.addEventListener('swiperight', function (e) {
                activeButton(e.target)
                console.log('on swiperight')
            })
            new Touch(el)
        }

        function activeButton(btn) {
            btn.classList.add('hg-activeButton')
            setTimeout(function () { deactiveButton(btn) }, 300)
        }

        function deactiveButton(btn) {
            btn.classList.remove('hg-activeButton')
        }

        function switchLayout(layout) {
            kbds = fime.qsa('.simple-keyboard')
            for (var i = 0; i < kbds.length; i++) {
                k = kbds[i]
                if (layout == k.dataset.layout) {
                    k.style.display = ''
                } else {
                    k.style.display = 'none'
                }
            }
        }

        let btns = fime.qsa('.hg-button')
        for (let i = 0; i < btns.length; i++) {
            initListeners(btns[i])
        }

        switchLayout('main')
    </script>
</body>

</html>