<!--
  ~ Copyright (c) 2023 Fime project https://fime.site
  ~ Initial author: zelde126@126.com
  -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="simple-keyboard.min.css">
    <style>
        body {
            overflow: hidden;
            padding: 0;
            margin: 0;
        }

        .fn-style {
            width: 10%;
        }

        .spacebar-style {
            width: 32%;
        }
    </style>
    <title>Qwerty</title>
</head>

<body>
    <div class="keyboardContainer">
        <div class="simple-keyboard"></div>
    </div>
    <script src="simple-keyboard.min.js"></script>
    <script src="swipe-keyboard.min.js"></script>
    <script src="jsbridge.js"></script>
    <script>
        const Keyboard = window.SimpleKeyboard.default
        const swipe = window.SimpleKeyboardSwipe.default

        const keyboard = new Keyboard({
            debug: true,
            // modules: [
            //     swipe
            // ],
            onChange: onChange,
            onKeyPress: onKeyPress,
            onKeyReleased: onKeyReleased,
            onChangeAll: onChangeAll,
            // useMouseEvents: true,
            autoUseTouchEvents: true,
            mergeDisplay: true,
            maxLength: 64,
            layoutName: "default",
            layout: {
                default: [
                    "q w e r t y u i o p",
                    "a s d f g h j k l",
                    "{shift} z x c v b n m {backspace}",
                    "{abc} ' {space} , . {ent}"
                ],
                shift: [
                    "Q W E R T Y U I O P",
                    "A S D F G H J K L",
                    "{shift} Z X C V B N M {backspace}",
                    "{abc} ， {space} 。 {ent}"
                ],
                numbers: ["1 2 3", "4 5 6", "7 8 9", "{abc} 0 {backspace}"]
            },
            display: {
                "{numbers}": "123",
                "{ent}": "Ent",
                "{escape}": "Esc",
                "{tab}": "⇥",
                "{backspace}": "⌫",
                "{capslock}": "⇪",
                "{shift}": "⇧",
                "{space}": "simple-keyboard",
                "{controlleft}": "ctrl ⌃",
                "{controlright}": "ctrl ⌃",
                "{altleft}": "alt ⌥",
                "{altright}": "alt ⌥",
                "{metaleft}": "cmd ⌘",
                "{metaright}": "cmd ⌘",
                "{abc}": "ABC",
                "'": "'分"
            },
            buttonTheme: [{
                class: 'spacebar-style',
                buttons: '{space}'
            }, {
                class: 'fn-style',
                buttons: '{number} {abc} {ent}'
            }]
        })

        function onChange(input) {
            console.debug("qwerty: Input changed", input)
        }

        function onChangeAll(input) {
            // console.debug("On change all", input)
            // keyboard.clearInput()
        }

        function onKeyPress(button) {
            console.debug("qwerty: Button pressed", button)
            keyboard.clearInput()
        }

        function onKeyReleased(button) {
            console.debug('qwerty: key released')
            keyboard.clearInput()
            let key = button
            if (key.substr(0, 1) == '{') {
                switch (key) {
                    case '{space}':
                        key = 'VK_SPACE'
                        break
                    case '{backspace}':
                        key = 'FN_BACKSPACE'
                        break
                    case '{ent}':
                        key = 'FN_ENTER'
                        break
                    case '{escape}':
                        key = 'FN_ESCAPE'
                        break
                    default:
                        break
                }
            }
            jsCallNative('onKey', key)
        }

        jsCallNative('init', 'keyboard')
    </script>
</body>

</html>